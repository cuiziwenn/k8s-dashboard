{% extends 'base.html' %}
{% block title %}Service管理{% endblock %}
{% block content %}
<div class="card">
    <h2 class="card-title">Service 管理</h2>
    <div style="margin-bottom: 2rem;">
        <label>选择命名空间：</label>
        <select onchange="location.href='?namespace='+this.value" style="padding: 0.5rem; border-radius: 6px; border: 2px solid #e0e0e0;">
            {% for ns in namespaces %}
            <option value="{{ ns.metadata.name }}" {% if ns.metadata.name == current_namespace %}selected{% endif %}>
                {{ ns.metadata.name }}
            </option>
            {% endfor %}
        </select>
    </div>
    <table>
        <thead>
            <tr>
                <th>名称</th>
                <th>类型</th>
                <th>Cluster IP</th>
                <th>端口</th>
                <th>创建时间</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for svc in services %}
            <tr>
                <td><strong>{{ svc.metadata.name }}</strong></td>
                <td>{{ svc.spec.type }}</td>
                <td>{{ svc.spec.cluster_ip }}</td>
                <td>
                    {% for port in svc.spec.ports %}
                    {{ port.port }}/{{ port.protocol }}
                    {% endfor %}
                </td>
                <td>{{ svc.metadata.creation_timestamp|date:"Y-m-d H:i:s" }}</td>
                <td>
                    <a href="/services/delete/{{ current_namespace }}/{{ svc.metadata.name }}/" 
                       class="btn btn-danger" onclick="return confirm('确认删除?')">删除</a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6" style="text-align: center; color: #999;">暂无数据</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
